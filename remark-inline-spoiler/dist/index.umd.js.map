{"version":3,"file":"index.umd.js","sources":["../src/index.ts"],"sourcesContent":["import { spoilerSyntax, SpoilerSyntaxOptions } from 'micromark-extension-inline-spoiler';\nimport { spoilerFromMarkdown, spoilerToMarkdown, SpoilerToMarkdownOptions } from 'mdast-util-inline-spoiler';\n\n////////////////////////////////////////////////////////////\n\nvar warningIssued: boolean = false;\n\nfunction remarkV13Warning(context: any): boolean {\n  if (\n    !warningIssued &&\n    ((context.Parser && context.Parser.prototype && context.Parser.prototype.blockTokenizers) ||\n      (context.Compiler && context.Compiler.prototype && context.Compiler.prototype.visitors))\n  ) {\n    warningIssued = true;\n    console.warn('[remark-inline-spoiler] Warning: please upgrade to remark 13 to use this plugin');\n  }\n\n  return warningIssued;\n}\n\nexport interface SpoilerPluginOptions {\n  syntax: Partial<SpoilerSyntaxOptions>;\n  toMarkdown: Partial<SpoilerToMarkdownOptions>;\n  // add extra options here, in addition to those for the syntax extension\n}\n\nexport function spoilerPlugin(this: any, options: Partial<SpoilerPluginOptions>) {\n  var data = this.data();\n\n  // warn for earlier versions\n  remarkV13Warning(this);\n\n  add('micromarkExtensions', spoilerSyntax(options.syntax || {}));\n  add('fromMarkdownExtensions', spoilerFromMarkdown);\n  add('toMarkdownExtensions', spoilerToMarkdown(options.toMarkdown || {}));\n\n  function add(field: string, value: any) {\n    if (data[field]) data[field].push(value);\n    else data[field] = [value];\n  }\n}\n"],"names":[],"mappings":";;;AAKA,IAAI,aAAa,GAAY,KAA7B;;AAEA,SAAS,gBAAT,CAA0B,OAA1B,EAAsC;AACpC,MACE,CAAC,aAAD,KACE,OAAO,CAAC,MAAR,IAAkB,OAAO,CAAC,MAAR,CAAe,SAAjC,IAA8C,OAAO,CAAC,MAAR,CAAe,SAAf,CAAyB,eAAxE,IACE,OAAO,CAAC,QAAR,IAAoB,OAAO,CAAC,QAAR,CAAiB,SAArC,IAAkD,OAAO,CAAC,QAAR,CAAiB,SAAjB,CAA2B,QAFhF,CADF,EAIE;AACA,IAAA,aAAa,GAAG,IAAhB;AACA,IAAA,OAAO,CAAC,IAAR,CAAa,iFAAb;AACD;;AAED,SAAO,aAAP;AACD;;AAQK,SAAU,aAAV,CAAmC,OAAnC,EAAyE;AAC7E,MAAI,IAAI,GAAG,KAAK,IAAL,EAAX,CAD6E;;AAI7E,EAAA,gBAAgB,CAAC,IAAD,CAAhB;AAEA,EAAA,GAAG,CAAC,qBAAD,EAAwB,aAAa,CAAC,OAAO,CAAC,MAAR,IAAkB,EAAnB,CAArC,CAAH;AACA,EAAA,GAAG,CAAC,wBAAD,EAA2B,mBAA3B,CAAH;AACA,EAAA,GAAG,CAAC,sBAAD,EAAyB,iBAAiB,CAAC,OAAO,CAAC,UAAR,IAAsB,EAAvB,CAA1C,CAAH;;AAEA,WAAS,GAAT,CAAa,KAAb,EAA4B,KAA5B,EAAsC;AACpC,QAAI,IAAI,CAAC,KAAD,CAAR,EAAiB,IAAI,CAAC,KAAD,CAAJ,CAAY,IAAZ,CAAiB,KAAjB,EAAjB,KACK,IAAI,CAAC,KAAD,CAAJ,GAAc,CAAC,KAAD,CAAd;AACN;AACF;;;;"}